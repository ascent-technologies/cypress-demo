version: 2.1

executors:
  cypress-demo:
    machine:
      image: circleci/classic:201808-01
      docker_layer_caching: true

workflows:
  build_and_test:
    jobs:
      - test_integration

jobs:
  test_integration:
    executor: cypress-demo
    steps:
      - checkout
      # - restore_cache:
      #     keys:
      #       - v1-deps-{{ .Branch }}-{{ checksum "package.json" }}
      #       - v1-deps-{{ .Branch }}
      #       - v1-deps
      - run:
          name: Build integration
          command: make integration-test
